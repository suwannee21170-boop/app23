function renderList() {
      listEl.innerHTML = "";
      items.forEach((item, i) => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `
          <h3>${item.name} (${item.phone})</h3>
          <small>${item.time} <br> ${item.ref}</small>
          <div class="amount">${item.amount}</div>
          <div class="status ${item.status}">${item.status === "success" ? "โอนแล้ว" : "กำลังโอน"}</div>
        `;
        listEl.appendChild(div);

        if (item.status === "pending") {
          const delay = Math.floor(Math.random() * 3000) + 3000; 
          setTimeout(() => {
            item.status = "success";
            renderList();
            const statusEl = document.querySelectorAll(".status")[i];
            if (statusEl) {
              statusEl.classList.add("highlight");
              setTimeout(() => statusEl.classList.remove("highlight"), 2000);
            }
          }, delay);
        }
      });
    }

    function getTime() {
      return new Date().toLocaleString("th-TH", { timeZone: "Asia/Bangkok" });
    }

    function updateTime() {
      document.getElementById("time").textContent = "อัปเดตล่าสุด: " + getTime();
    }
    setInterval(updateTime, 1000);
    updateTime();

    for (let i = 0; i < 4; i++) {
      items.push({...getRandomItem(), time: getTime()});
    }
    renderList();

    setInterval(() => {
      const cards = document.querySelectorAll(".card");
      if (cards.length > 0) {
        cards[0].classList.add("fade-out");
        setTimeout(() => {
          items.shift();
          items.push({...getRandomItem(), time: getTime()});
          renderList();
        }, 600);
      }
    }, 5000);
  </script>
</body>
</html>
